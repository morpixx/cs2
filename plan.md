
# Технічна Архітектура та Структура Проєкту

## 1. Фінальний Технологічний Стек

Ми використовуємо найкращі інструменти для кожної задачі, щоб забезпечити високий FPS, стабільність та максимальну непомітність.

* **Мова:** `Python 3.10+ (64-bit)`
* **Пам’ять (Core):** `Pymem` — читання структур безпосередньо з пам’яті гри.
* **Візуал (Vision / AI):**
  * `DXCam` — захоплення екрана (144+ FPS).
  * `Ultralytics YOLOv8 (TensorRT Engine)` — надшвидке детектування силуетів та голів.
* **Математика:**
  * `NumPy` — векторні обчислення та лінійна алгебра.
  * `FilterPy` — фільтри Калмана (предикшн руху та згладжування аімбота).
* **Рендер (ESP / UI):**
  * `pyMeow` — малювання ESP поверх прозорого вікна.
  * `Dear PyGui` — меню налаштувань.
* **Ввід (Input):**
  * `Logitech G-Hub DLL` (через `ctypes`) — безпечна емуляція миші.

## 2. Структура Файлів (File Structure)

Ця структура розроблена для підтримки модульності. Логіка гри відокремлена від логіки чіта.

```text
PROJECT_ROOT/
├── assets/                  # Зовнішні ресурси
│   ├── fonts/               # Шрифти для інтерфейсу та ESP
│   ├── drivers/             
│   │   └── logitech-cve.dll # DLL драйвер для емуляції миші
│   └── models/              
│       └── yolov8n.pt       # AI модель (якщо використовуємо YOLO)
├── config/                  
│   └── settings.json        # Конфіг (кольори, FOV, smooth, hotkeys)
├── src/
│   ├── core/                # Системне ядро (Memory & Offsets)
│   │   ├── __init__.py
│   │   ├── memory.py        # Обгортка Pymem (читання/запис пам'яті)
│   │   ├── offsets.py       # Парсинг JSON з GitHub (a2x/cs2-dumper)
│   │   └── config.py        # Завантажувач/зберігач settings.json
│   ├── game/                # Стан гри (Game State)
│   │   ├── __init__.py
│   │   ├── entity.py        # Клас Entity (оптимізований з __slots__)
│   │   ├── manager.py       # Цикл оновлення сутностей (Entity Loop)
│   │   └── geometry.py      # Математика: WorldToScreen, розрахунок кутів
│   ├── features/            # Основний функціонал (Hacks)
│   │   ├── __init__.py
│   │   ├── aimbot.py        # Логіка аіма + Фільтри Калмана
│   │   ├── vision.py        # DXCam + YOLO (AI перевірка видимості)
│   │   ├── triggerbot.py    # Логіка пострілу (One-Tap)
│   │   ├── esp.py           # Рендер ESP (Box, Skeleton, Radar) через pyMeow
│   │   ├── rcs.py           # Recoil Control System (Standalone логіка)
│   │   └── misc.py          # Spectator List, Flash Check, Auto Pistol
│   ├── inputs/              # Управління вводом
│   │   ├── __init__.py
│   │   ├── mouse.py         # Клас-обгортка над Logitech DLL / WinAPI
│   │   └── keyboard.py      # Перевірка натискань (Async GetAsyncKeyState)
│   └── ui/                  # Графічний інтерфейс
│       ├── __init__.py
│       ├── menu.py          # Меню налаштувань (Dear PyGui)
│       └── overlay.py       # Прозоре вікно для ESP
├── main.py                  # Точка входу (ініціалізація та потоки)
├── build.bat                # Скрипт компіляції (Nuitka)
└── requirements.txt         # Залежності
```

---

## 3. Детальний розбір модулів і функцій

### A. Читання пам’яті та Оффсети (`src/core/offsets.py`)

**Як це працює:**
Ми **не скануємо сигнатури** вручну (це повільно і ненадійно при великих оновленнях). Ми беремо готові дані з надійного джерела.

**Реалізація:**

1. Клас `Offsets` робить HTTP GET-запит до репозиторію `a2x/cs2-dumper`.
2. Завантажуються два JSON-файли: `offsets.json` та `client_dll.json`.
3. Змінні класу (`dwLocalPlayerPawn`, `m_iHealth` і т.д.) оновлюються динамічно при кожному запуску.
4. **Перевага:** Якщо CS2 оновилася 5 хвилин тому, і дампер оновився — чит працює без перекомпіляції коду.

### B. Продвинутий ESP (`src/features/esp.py`)

Весь рендер виконується через `pyMeow` (найшвидший враппер для оверлеїв на Python).

1. **Скелети / Бокси**
    * Зчитуємо `BoneMatrix` (через `read_bones_batch` у `memory.py`).
    * **Союзник:** Тільки зелений скелет.
    * **Ворог:** Червоний бокс + скелет.
2. **Інфо-панель:** `[Weapon] | [HP] | [Armor]`.
3. **Бомба (C4):**
    * Парсинг `dwPlantedC4` и рисуем над персонажем знак бомбы
    * Таймер до вибуху / деф’юзу.
    * Сайт (A/B).
4. **Back-Track Alert:**
    * Математика в `geometry.py` рахує кут.
    * Якщо ворог ззаду (<15м) → малюємо дугу.
5. **2D Радар:** Проєкція координат на коло.

### C. Гібридний Аімбот (`src/features/aimbot.py` + `vision.py`)

Комбінація пам'яті та штучного інтелекту.

1. **Target Selector (`manager.py`):**
    * Сортування ворогів за дистанцією до прицілу.
2. **Hybrid Visibility Check:**
    * **Швидко:** `m_bSpottedByMask` (пам'ять).
    * **Точно:** `vision.py` робить скріншот зони 100x100 пікселів навколо прицілу (DXCam). YOLO перевіряє, чи є там голова.
3. **Aim Logic:**
    * Вибір кістки (Head -> Neck -> Stomach).
    * **Предикшн:** Додавання вектора швидкості ворога.
    * **Згладжування:** `FilterPy` (Калман) для "людського" руху.
4. **Input:** Передача координат у `src/inputs/mouse.py`.

### D. Ван-тапи та Тригербот (`src/features/triggerbot.py`)

* **Режим:** Hold Key (затиснути клавішу).
* **Логіка:**
  * Перевірка `iIDEntIndex` (ID об'єкта під прицілом) з пам'яті.
  * Якщо ID > 0 і це ворог → Миттєвий клік.
* **Cooldown:** Захист від спрею.

### E. RCS (`src/features/rcs.py`)

Контроль віддачі для автоматичної зброї.

* Читаємо `m_aimPunchAngle`.
* Інвертуємо кут і плавно доводимо приціл.
* Активується тільки для зброї зі списку (AK-47, M4A1, Galil і т.д.), ігнорує пістолети/снайперки.

---

## 4. Додаткові Функції (`src/features/misc.py`)

1. **Spectator List:**
    * Перебір `dwLocalPlayerController` -> `m_hObserverTarget`.
    * Показ списку нікнеймів тих, хто дивиться за тобою.
2. **Flash Check:**
    * Моніторинг `m_flFlashDuration`. Якщо сліпий — відключаємо AI та Аімбот.
3. **Sound ESP:**
    * Біпер на базі бібліотеки `winsound` або `pygame`, частота залежить від дистанції.
